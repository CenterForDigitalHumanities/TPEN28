<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>LOGIN</title>
        <meta charset="UTF-8">
        <link type="text/css" href="http://localhost:8080/T-PEN/css/custom-theme/jQuery.css" rel="Stylesheet" />
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script> 
    </head>
    <body>
        <div id="wrapper">
            <div id="header"><p align="center" class="tagline">transcription for paleographical and editorial notation</p>
            </div>
            <div id="content">
                    <h1><script>document.write(document.title); </script></h1>
            <div id="main" class="ui-widget ui-widget-content ui-corner-all ui-tabs ui-helper-reset ui-helper-clearfix">
                <div id="login" class="left">
                    <h3 class="ui-widget-header ui-tabs ui-corner-all ui-state-default">Log In</h3>
            <p> You may log into your account to start transcribing or to manage your projects.</p>
                        <div id="resetPassword">
                            <h6 id="forgetFormBtn" class="clear-right">Forgot your Password?<span class="left ui-icon ui-icon-arrowstop-1-s"></span></h6>
                            <form id="forgetForm" action="admin.jsp" method="POST" class="ui-corner-all">
                            <span>Enter the email address associated with your account to have your password reset.</span>
                                <input id="email" type="text" class="text" style="width:220px;" placeholder="Forgot your password?" name="email">
                                <input class="right ui-corner-all ui-state-default" type="submit" name="emailSubmitted" value="Reset Password"/>
                            </form>
                        </div>
<!--                        <form id="login" action="login.jsp" method="POST" >
                            <fieldset>
                                <legend>Login Here:</legend>
                                <label for="uname">Email</label><input class="text" type="text" name="uname"/><br/>
                                <label for="password">Password</label><input  class="text" type="password" name="password"/><br/>
                            <input type="hidden" name="ref" value="<%out.print(session.getAttribute("ref"));%>"/>
                            <input class="ui-button ui-state-default ui-corner-all right" type="submit" title="Log In" value="Log In">
                            </fieldset>
                        </form>-->
                <div id="userLogin">
                    <div>Login Here:</div>
                    <label for="uname">Email</label> <input class="text" type="text" id="uname"/> <br/>
                    <label for="password">Password</label> <input class="text" type="password" id="password"/> <br/>
                    <input class="ui-button ui-state-default ui-corner-all right" type="button" title="Log In" value="Log In"
                           onclick="userLogin();">
                </div>
                </div>
                <div id="register" class="right">
                    <h3 class="ui-widget-header ui-tabs ui-corner-all ui-state-default">Register a New Account</h3>
               <form action="signup.jsp" method="POST">
               <fieldset>
                <legend>or Register as a New User:</legend>
                Note: You will receive your password via email after your account is activated by an administrator
                <label for="uname">Email</label><input class="text" type="text" name="uname"/><br/>
                <label for="fname">First Name</label><input class="text" type="text" name="fname"/><br/>
                <label for="lname">Last Name</label><input class="text" type="text" name="lname"/><br/>
               <input type="submit" value="Register" class="ui-button ui-state-default ui-corner-all right"/>
               </fieldset></form>
                </div>
            </div>
        <a class="returnButton" href="index.jsp">Return to T&#8209;PEN Home</a>
        </div>
        </div>
    </body>
</html>
<script>
    function userLogin(){
        var userName = $('#uname').val();
        var password = $('#password').val();
        if(userName !== undefined && userName !== "" && password !== undefined && password !== ""){
            var url = "http://localhost:8084/TPEN/login";
            var params = {"uname":userName, "password":password};
            alert(userName);
            $.post(url, params, function(){console.log('POSTING: '+JSON.stringify(params));},"json");
        }
        else{
            alert('You must enter a user name (E-mail) and password!');
        }
//                error: function(jqXHR,error, errorThrown) {  
//                    if(jqXHR.status && jqXHR.status==204){
//                         alert("Missing username and password"); 
//                    }
//                    else if (jqXHR.status && jqXHR.status==401) {
//                        alert("Missing username or password"); 
//                    }
//                    else{
//                        alert('Something went wrong: '+jqXHR.status);
//                    }
//               }
        
        
    }
    
    function registerNewUser(){
        //Need an API? 
    }
</script>
    
